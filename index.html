<!DOCTYPE html><html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ЁЯОм PKT Flix</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    /* ржЖржЧрзЗрж░ рж╕ржм CSS рж╕рзНржЯрж╛ржЗрж▓ ржПржЦрж╛ржирзЗ ржерж╛ржХржмрзЗ */
    /* рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржХрж░рж╛рж░ ржЬржирзНржп ржПржЦрж╛ржирзЗ ржмрж╛ржж ржжрзЗрзЯрж╛ рж╣рзЯрзЗржЫрзЗ */
  </style>
</head>
<body>
  <header>
    <div class="clock-date" id="clock">тП░</div>
    <div class="site-title">PKT Flix</div>
  </header>  <div class="search-bar">
    <input type="text" placeholder="ржорзБржнрж┐рж░ ржирж╛ржо рж▓рж┐ржЦрзБржи..." id="searchInput" oninput="filterMovies()">
  </div>  <div id="category-buttons" class="section"></div>  <div class="section">
    <h2>ЁЯОЮя╕П Popular Movies</h2>
    <div class="grid" id="popular-movies"></div>
  </div>  <div class="section">
    <h2>ЁЯЖХ Recently Added</h2>
    <div class="grid" id="recent-movies"></div>
  </div>  <div class="section">
    <h2>ЁЯМР Web Series</h2>
    <div class="grid" id="web-series"></div>
  </div>  <div class="section">
    <h2>ЁЯОм All Movies</h2>
    <div class="grid" id="all-movies"></div>
  </div>  <!-- ржнрж┐ржбрж┐ржУ ржкрзНрж▓рзЗрзЯрж╛рж░ -->  <div class="player" id="player-box">
    <video id="video-player" controls></video>
  </div>  <!-- рж╢рж░рзНржЯ рж░рж┐ржнрж┐ржЙ -->  <div class="details">
    <p id="video-review">рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж╛ ржорзБржнрж┐рж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржПржЦрж╛ржирзЗ ржЖрж╕ржмрзЗред</p><!-- ржбрж╛ржУржирж▓рзЛржб ржмрж╛ржЯржи -->
<a id="download-btn" class="download-btn" href="#" target="_blank">ЁЯОм ржбрж╛ржУржирж▓рзЛржб ржХрж░рзБржи</a>

<!-- ржЯрж╛ржЗржорж╛рж░ + ржПржб -->
<div id="download-timer">тП│ ржжрзЯрж╛ ржХрж░рзЗ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи... <span id="timer-count">10</span> рж╕рзЗржХрзЗржирзНржб</div>
<div class="ad-box" id="ad-box" style="display:none;">
  ЁЯУв ржПржЗ ржЬрж╛рзЯржЧрж╛рзЯ ржПржХржЯрж┐ ржЕрзНржпрж╛ржб ржжрзЗржЦрж╛ржирзЛ ржпрж╛ржмрзЗред
</div>

  </div>  <script>
    let movies = [];

    // HLS & MP4 ржнрж┐ржбрж┐ржУ рж▓рзЛржб
    function loadVideo(data) {
      const video = document.getElementById('video-player');
      const review = document.getElementById("video-review");
      const downloadBtn = document.getElementById("download-btn");
      const timerBox = document.getElementById("download-timer");
      const timerCount = document.getElementById("timer-count");
      const adBox = document.getElementById("ad-box");

      // рж░рж┐ржнрж┐ржЙ ржжрзЗржЦрж╛ржУ
      review.innerText = data.review;

      // HLS ржЪрзЗржХ
      if (Hls.isSupported() && data.video.endsWith(".m3u8")) {
        const hls = new Hls();
        hls.loadSource(data.video);
        hls.attachMedia(video);
      } else {
        video.src = data.video;
      }

      video.play();

      // ржбрж╛ржУржирж▓рзЛржб ржмрж╛ржЯржирзЗ ржЯрж╛ржЗржорж╛рж░
      downloadBtn.onclick = function(e) {
        e.preventDefault();
        let countdown = 10;
        timerCount.textContent = countdown;
        timerBox.style.display = 'block';
        adBox.style.display = 'block';

        const interval = setInterval(() => {
          countdown--;
          timerCount.textContent = countdown;
          if (countdown <= 0) {
            clearInterval(interval);
            window.open(data.video, '_blank');
            timerBox.style.display = 'none';
            adBox.style.display = 'none';
          }
        }, 1000);
      };
    }

    // ржорзБржнрж┐ рж▓рж┐рж╕рзНржЯ JSON ржерзЗржХрзЗ рж▓рзЛржб
    async function loadMovieList() {
      const res = await fetch("movies.json");
      movies = await res.json();
      displayMovies(movies);
      displayCategories();
    }

    function displayMovies(data) {
      const allContainer = document.getElementById("all-movies");
      const popularContainer = document.getElementById("popular-movies");
      const recentContainer = document.getElementById("recent-movies");
      const webSeriesContainer = document.getElementById("web-series");

      allContainer.innerHTML = popularContainer.innerHTML = recentContainer.innerHTML = webSeriesContainer.innerHTML = "";

      data.forEach(movie => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `<img src="${movie.poster}" alt="${movie.title}"/><h4>${movie.title}</h4>`;
        card.onclick = () => loadVideo(movie);

        allContainer.appendChild(card);
        if (movie.type === "movie") popularContainer.appendChild(card.cloneNode(true));
        if (movie.type === "series") webSeriesContainer.appendChild(card.cloneNode(true));
        recentContainer.appendChild(card.cloneNode(true));
      });
    }

    function filterMovies() {
      const q = document.getElementById("searchInput").value.toLowerCase();
      const filtered = movies.filter(m => m.title.toLowerCase().includes(q));
      displayMovies(filtered);
    }

    function displayCategories() {
      const categories = [...new Set(movies.map(m => m.category))];
      const container = document.getElementById("category-buttons");

      categories.forEach(cat => {
        const btn = document.createElement("button");
        btn.innerText = cat;
        btn.onclick = () => {
          const filtered = movies.filter(m => m.category === cat);
          displayMovies(filtered);
        };
        container.appendChild(btn);
      });
    }

    function updateClock() {
      const now = new Date();
      document.getElementById("clock").textContent = now.toLocaleString("bn-BD");
    }

    loadMovieList();
    setInterval(updateClock, 1000);
  </script></body>
</html>
