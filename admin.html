<!-- admin.html -->
<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>📂 Movie Admin Panel</h1>
  </header>

  <main style="padding:1rem;">
    <h2 id="formTitle">➕ Add New Movie</h2>
    <input type="text" id="title" placeholder="Movie Title">
    <input type="text" id="category" placeholder="Category (e.g., Action)">
    <input type="text" id="poster" placeholder="Poster URL">
    <input type="text" id="video" placeholder="Video Link (.mp4 or .m3u8)">
    <button onclick="handleSubmit()" id="submitBtn">Add Movie</button>

    <h2 style="margin-top:2rem;">🎬 All Movies</h2>
    <div id="movieList" class="movie-grid"></div>
  </main>

  <script>
    let movieList = JSON.parse(localStorage.getItem('movies')) || [];
    let editIndex = -1;

    function saveMovies() {
      localStorage.setItem('movies', JSON.stringify(movieList));
      loadMovies();
    }

    function handleSubmit() {
      const title = document.getElementById('title').value.trim();
      const category = document.getElementById('category').value.trim();
      const poster = document.getElementById('poster').value.trim();
      const video = document.getElementById('video').value.trim();

      if (!title || !category || !poster || !video) return;

      if (editIndex >= 0) {
        movieList[editIndex] = { title, category, poster, video };
        document.getElementById('submitBtn').innerText = 'Add Movie';
        document.getElementById('formTitle').innerText = '➕ Add New Movie';
        editIndex = -1;
      } else {
        movieList.push({ title, category, poster, video });
      }

      saveMovies();
      clearForm();
    }

    function clearForm() {
      document.getElementById('title').value = '';
      document.getElementById('category').value = '';
      document.getElementById('poster').value = '';
      document.getElementById('video').value = '';
    }

    function editMovie(index) {
      const movie = movieList[index];
      document.getElementById('title').value = movie.title;
      document.getElementById('category').value = movie.category;
      document.getElementById('poster').value = movie.poster;
      document.getElementById('video').value = movie.video;

      document.getElementById('submitBtn').innerText = 'Update Movie';
      document.getElementById('formTitle').innerText = '✏️ Edit Movie';
      editIndex = index;
    }

    function deleteMovie(index) {
      if (confirm("Are you sure to delete this movie?")) {
        movieList.splice(index, 1);
        saveMovies();
      }
    }

    function loadMovies() {
      const list = document.getElementById('movieList');
      list.innerHTML = '';
      movieList.forEach((movie, index) => {
        list.innerHTML += `
          <div class="movie-card">
            <img src="${movie.poster}" alt="">
            <h2>${movie.title}</h2>
            <p>📁 ${movie.category}</p>
            <div class="buttons">
              <a href="#" class="btn watch" onclick="editMovie(${index})">✏️ Edit</a>
              <a href="#" class="btn download" onclick="deleteMovie(${index})">🗑 Delete</a>
            </div>
          </div>
        `;
      });
    }

    loadMovies();
  </script>
</body>
</html>
